<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head') %>

    <body class="crear-editar">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

        <%- include('../partials/header') %>
            <main>

                <h1>Editar producto</h1>

                <form action="/admin/edit/<%=producto.id%>?_method=PUT" method="post" enctype="multipart/form-data">
                    <section>
                        <div class="form-floating m-2">
                            <input type="text" name="Titulo" class="form-control" id="Titulo" placeholder="Titulo"
                                value="<%= locals.old && old.Titulo? old.Titulo : producto.titulo %> ">
                            <label for="Titulo">Titulo</label>
                            <small id="tituloError">
                                <%= locals.errors && errors.Titulo? errors.Titulo.msg : null %>
                            </small>
                        </div>
                        <div class="form-floating m-2">
                            <select class="form-select" name="Categoria" id="Categoria"
                                aria-label="Floating label select example">
                                <% categorias.forEach(categoria=> { %>
                                    <option value="<%= categoria.id %>">
                                        <%= categoria.categoria%>
                                    </option>
                                    <% }) %>
                            </select>
                            <label for="Categoria">Categoria</label>
                            <small id="categoriaError">
                                <%= locals.errors && errors.Categoria? errors.Categoria.msg : null %>
                            </small>
                        </div>
                        <div class="form-floating m-2">
                            <input type="number" name="Precio" class="form-control" id="Precio" placeholder="Precio"
                                value="<%=locals.old && old.Precio? old.Precio : producto.precio %>">
                            <label for="Precio m-2">Precio</label>
                            <small id="precioError">
                                <%= locals.errors && errors.Precio? errors.Precio.msg : null %>
                            </small>
                        </div>
                        <div class="form-floating m-2">
                            <input type="number" name="Descuento" class="form-control" id="Descuento"
                                placeholder="Descuento"
                                value="<%=locals.old && old.Descuento? old.Descuento : producto.descuento%>">
                            <label for="Descuento">Descuento</label>
                            <small id="descuentoError">
                                <%= locals.errors && errors.Descuento? errors.Descuento.msg : null %>
                            </small>
                        </div>
                        <div class="form-floating m-2">
                            <input type="number" name="Stock" class="form-control" id="Stock" placeholder="Stock"
                                value="<%=producto.stock%>">
                            <label for="Stock">Stock</label>
                            <small id="stockError">
                                <%= locals.errors && errors.Stock? errors.Stock.msg : null %>
                            </small>
                        </div>

                        <div class="form-floating m-2">
                            <textarea class="form-control h-100" name="Descripcion"
                                placeholder="Por favor inserte la descripcion del producto"
                                id="Descripcion"><%=locals.old && old.Descripcion? old.Descripcion : producto.descripcion %></textarea>
                            <label for="floatingTextarea">Descripcion</label>
                            <small id="descripcionError">
                                <%= locals.errors && errors.Descripcion? errors.Descripcion.msg : null %>
                            </small>
                        </div>

                        <div class="m-2">
                            <label for="formFileMultiple" name="imagen" class="form-label">Subir imagenes del
                                producto</label>
                            <input class="form-control" name="imagenes" type="file" id="imagen" multiple>
                            <small id="imagenError">
                                <%= locals.errors && errors.imagen? errors.imagen.msg : null %>
                            </small>
                        </div>

                        <div class="button">
                            <button class="btn btn-outline-success" id="btn-submit" type="submit">Editar
                                Producto</button>
                        </div>

                    </section>
                </form>
            </main>
            <%- include('../partials/footer') %>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
                    crossorigin="anonymous"></script>
                <script src="/javascript/validacionProductos.js"></script>
    </body>

</html>